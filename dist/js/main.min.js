(()=>{"use strict";let e,t;const a={girlKnight:{position:{x:0,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/GirlKnight/idle.png",framesMax:11,scale:2.2,offset:{x:100,y:100},sprites:{idle:{imageSrc:".././img/person/GirlKnight/idle.png",framesMax:11},run:{imageSrc:".././img/person/GirlKnight/Run.png",framesMax:8},jump:{imageSrc:".././img/person/GirlKnight/Jump.png",framesMax:3},fall:{imageSrc:".././img/person/GirlKnight/Fall.png",framesMax:3},attack:{imageSrc:".././img/person/GirlKnight/Attack1.png",framesMax:7},takeHit:{imageSrc:".././img/person/GirlKnight/Take Hit.png",framesMax:4},death:{imageSrc:".././img/person/GirlKnight/Death.png",framesMax:11}},attackBox:{offset:{x:80,y:50},width:100,height:50}},hero1:{position:{x:0,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/Hero1/Idle.png",framesMax:10,scale:2.65,offset:{x:100,y:120},sprites:{idle:{imageSrc:".././img/person/Hero1//Idle.png",framesMax:10},run:{imageSrc:".././img/person/Hero1//Run.png",framesMax:8},jump:{imageSrc:".././img/person/Hero1/Jump.png",framesMax:3},fall:{imageSrc:".././img/person/Hero1/Fall.png",framesMax:3},attack:{imageSrc:".././img/person/Hero1/Attack1.png",framesMax:7},takeHit:{imageSrc:".././img/person/Hero1/Take Hit.png",framesMax:3},death:{imageSrc:".././img/person/Hero1/Death.png",framesMax:7}},attackBox:{offset:{x:120,y:50},width:100,height:50}},wizzardTrue:{position:{x:0,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/WizardTrue/idle.png",framesMax:6,scale:1.5,offset:{x:100,y:60},sprites:{idle:{imageSrc:".././img/person/WizardTrue/idle.png",framesMax:6},run:{imageSrc:".././img/person/WizardTrue/Run.png",framesMax:8},jump:{imageSrc:".././img/person/WizardTrue/Jump.png",framesMax:2},fall:{imageSrc:".././img/person/WizardTrue/Fall.png",framesMax:2},attack:{imageSrc:".././img/person/WizardTrue/Attack2.png",framesMax:8},takeHit:{imageSrc:".././img/person/WizardTrue/Hit.png",framesMax:4},death:{imageSrc:".././img/person/WizardTrue/Death.png",framesMax:7}},attackBox:{offset:{x:100,y:50},width:100,height:50}},wizzardFalse:{position:{x:800,y:100},velocity:{x:0,y:0},color:"blue",imageSrc:".././img/person/WizardFalse/idle.png",framesMax:8,scale:2.2,offset:{x:10,y:70},sprites:{idle:{imageSrc:".././img/person/WizardFalse/idle.png",framesMax:8},run:{imageSrc:".././img/person/WizardFalse/Move.png",framesMax:8},jump:{imageSrc:".././img/person/WizardFalse/idle.png",framesMax:8},fall:{imageSrc:".././img/person/WizardFalse/idle.png",framesMax:8},attack:{imageSrc:".././img/person/WizardFalse/Attack.png",framesMax:8},takeHit:{imageSrc:".././img/person/WizardFalse/Take Hit.png",framesMax:4},death:{imageSrc:".././img/person/WizardFalse/Death.png",framesMax:5}},attackBox:{offset:{x:0,y:50},width:100,height:50}},KnightTrue:{position:{x:0,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/KnightTrue/idle.png",framesMax:11,scale:2.2,offset:{x:100,y:80},sprites:{idle:{imageSrc:".././img/person/KnightTrue/idle.png",framesMax:8},run:{imageSrc:".././img/person/KnightTrue/Run.png",framesMax:8},jump:{imageSrc:".././img/person/KnightTrue/Jump.png",framesMax:2},fall:{imageSrc:".././img/person/KnightTrue/Fall.png",framesMax:2},attack:{imageSrc:".././img/person/KnightTrue/Attack1.png",framesMax:4},takeHit:{imageSrc:".././img/person/KnightTrue/Take Hit.png",framesMax:4},death:{imageSrc:".././img/person/KnightTrue/Death.png",framesMax:6}},attackBox:{offset:{x:100,y:50},width:100,height:50}},knightFalse:{position:{x:800,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/Hero2/idle.png",framesMax:6,scale:1.6,offset:{x:100,y:35},sprites:{idle:{imageSrc:".././img/person/Hero2/idle.png",framesMax:6},run:{imageSrc:".././img/person/Hero2/Run.png",framesMax:8},jump:{imageSrc:".././img/person/Hero2/Jump.png",framesMax:2},fall:{imageSrc:".././img/person/Hero2/Fall.png",framesMax:2},attack:{imageSrc:".././img/person/Hero2/Attack1.png",framesMax:6},takeHit:{imageSrc:".././img/person/Hero2/Hit.png",framesMax:4},death:{imageSrc:".././img/person/Hero2/Death.png",framesMax:11}},attackBox:{offset:{x:-80,y:50},width:130,height:50}},banditFalse:{position:{x:800,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/BanditFalse/idle.png",framesMax:8,scale:2.7,offset:{x:100,y:110},sprites:{idle:{imageSrc:".././img/person/BanditFalse/idle.png",framesMax:8},run:{imageSrc:".././img/person/BanditFalse/Run.png",framesMax:8},jump:{imageSrc:".././img/person/BanditFalse/Jump.png",framesMax:2},fall:{imageSrc:".././img/person/BanditFalse/Fall.png",framesMax:2},attack:{imageSrc:".././img/person/BanditFalse/Attack1.png",framesMax:5},takeHit:{imageSrc:".././img/person/BanditFalse/Take Hit.png",framesMax:3},death:{imageSrc:".././img/person/BanditFalse/Death.png",framesMax:8}},attackBox:{offset:{x:-30,y:50},width:130,height:50}},samuraiFalse:{position:{x:800,y:100},velocity:{x:5,y:1},color:"blue",imageSrc:".././img/person/SamuraiFalse/idle.png",framesMax:8,scale:2.2,offset:{x:100,y:120},sprites:{idle:{imageSrc:".././img/person/SamuraiFalse/idle.png",framesMax:8},run:{imageSrc:".././img/person/SamuraiFalse/Run.png",framesMax:8},jump:{imageSrc:".././img/person/SamuraiFalse/Jump.png",framesMax:2},fall:{imageSrc:".././img/person/SamuraiFalse/Fall.png",framesMax:2},attack:{imageSrc:".././img/person/SamuraiFalse/Attack1.png",framesMax:6},takeHit:{imageSrc:".././img/person/SamuraiFalse/Take Hit.png",framesMax:4},death:{imageSrc:".././img/person/SamuraiFalse/Death.png",framesMax:6}},attackBox:{offset:{x:-80,y:50},width:130,height:50}}};class i{constructor({position:e,imageSrc:t,scale:a=1,framesMax:i=1,offset:s={x:0,y:0},canvasBlock:r,canvasView:o}){this.position=e,this.height=150,this.width=50,this.image=new Image,this.image.src=t,this.scale=a,this.framesMax=i,this.framesCurrent=0,this.framesElapsed=0,this.framesHold=5,this.offset=s,this.canvasBlock=r,this.canvasView=o}draw(){this.canvasView.drawImage(this.image,this.framesCurrent*(this.image.width/this.framesMax),0,this.image.width/this.framesMax,this.image.height,this.position.x-this.offset.x,this.position.y-this.offset.y,this.image.width/this.framesMax*this.scale,this.image.height*this.scale)}animateFrame(){this.framesElapsed++,this.framesElapsed%this.framesHold==0&&(this.framesCurrent<this.framesMax-1?this.framesCurrent++:this.framesCurrent=0)}update(){this.draw(),this.animateFrame()}}class s extends i{constructor({position:e,velocity:t,color:a="green",imageSrc:i,scale:s=1,framesMax:r=1,offset:o={x:0,y:0},sprites:m,attackBox:c={offset:{},width:void 0,height:void 0},canvasBlock:n,canvasView:g}){super({position:e,imageSrc:i,scale:s,framesMax:r,offset:o}),this.velocity=t,this.height=150,this.width=150,this.lastKeys,this.attackBox={position:{x:this.position.x,y:this.position.y},offset:c.offset,width:c.width,height:c.height},this.color=a,this.isAttack,this.health=100,this.framesCurrent=0,this.framesElapsed=0,this.framesHold=5,this.sprites=m,this.dead=!1,this.canvasBlock=n,this.canvasView=g,this.gravity=.4;for(const e in this.sprites)m[e].image=new Image,m[e].image.src=m[e].imageSrc}update(){this.draw(),this.dead||this.animateFrame(),this.attackBox.position.x=this.position.x+this.attackBox.offset.x,this.attackBox.position.y=this.position.y+this.attackBox.offset.y,this.position.y+=this.velocity.y,this.position.x+=this.velocity.x,this.position.y<0&&(this.velocity.y=1),this.position.y+this.velocity.y+this.height>=this.canvasBlock.height-95?this.velocity.y=0:this.velocity.y+=this.gravity,this.position.x<0&&(this.position.x-=this.velocity.x),this.position.x>=1024-this.width&&(this.position.x-=this.velocity.x)}attack(){this.isAttack=!0,this.swicthSprite("attack")}takeHit(){this.health-=20,this.health<=0?this.swicthSprite("death"):this.swicthSprite("takeHit")}swicthSprite(e){if(!(this.image===this.sprites.attack.image&&this.framesCurrent<this.sprites.attack.framesMax-1||this.image===this.sprites.takeHit.image&&this.framesCurrent<this.sprites.takeHit.framesMax-1))if(this.image!==this.sprites.death.image)switch(e){case"idle":this.image!==this.sprites.idle.image&&(this.image=this.sprites.idle.image,this.framesMax=this.sprites.idle.framesMax);break;case"run":this.image!==this.sprites.run.image&&(this.image=this.sprites.run.image,this.framesMax=this.sprites.run.framesMax);break;case"jump":this.image!==this.sprites.run.image&&(this.image=this.sprites.jump.image,this.framesMax=this.sprites.jump.framesMax);break;case"fall":this.image!==this.sprites.jump.image&&(this.image=this.sprites.fall.image,this.framesMax=this.sprites.fall.framesMax);break;case"attack":this.image!==this.sprites.attack.image&&(this.image=this.sprites.attack.image,this.framesMax=this.sprites.attack.framesMax,this.framesCurrent=0);break;case"takeHit":this.image!==this.sprites.takeHit.image&&(this.image=this.sprites.takeHit.image,this.framesMax=this.sprites.takeHit.framesMax,this.framesCurrent=0);break;case"death":this.image!==this.sprites.death.image&&(this.image=this.sprites.death.image,this.framesMax=this.sprites.death.framesMax,this.framesCurrent=0)}else this.framesCurrent===this.sprites.death.framesMax-1&&(this.dead=!0)}}const r=(e,t,a)=>{clearTimeout(a);const i=document.querySelector(".game__end"),s=document.querySelector(".game__end-text"),r=gsap.timeline();e.health>t.health&&(r.to(i,{display:"block",opacity:1,top:"35%"}),s.innerHTML="Player 1 Win"),e.health<t.health&&(r.to(i,{display:"block",opacity:1,top:"35%"}),s.innerHTML="Player 2 Win"),e.health==t.health&&(r.to(i,{display:"block",opacity:1,top:"35%"}),s.innerHTML="Tie")};(()=>{const a=document.querySelectorAll(".person__characther"),i=document.querySelector(".btn__next");let s=!1,r=!1;function o(e,t){e.closest(".person__characther").querySelectorAll(".person__item").forEach((e=>{e.classList.remove(t)}))}a.forEach((a=>{a.addEventListener("click",(a=>{let m=a.target;m.classList.contains("knights")&&(o(m,"active__knights"),m.closest(".person__item").classList.add("active__knights"),e=m.getAttribute("id"),s=!0),m.classList.contains("monster")&&(o(m,"active__monster"),m.closest(".person__item").classList.add("active__monster"),t=m.getAttribute("id"),r=!0),s&&r&&(i.style.display="block")}))}))})(),(()=>{const o=document.querySelector(".btn__next"),m=document.querySelector(".game__content"),c=gsap.timeline();o.addEventListener("click",(()=>{document.querySelector(".game").style.display="block",m.style.display="inline-block";const o=document.querySelector("canvas"),n=o.getContext("2d");o.width=1024,o.height=576,n.fillRect(0,0,o.width,o.height);const g=new i({position:{x:0,y:0},imageSrc:".././img/map/background.png",canvasBlock:o,canvasView:n}),p=new i({position:{x:600,y:135},imageSrc:".././img/map/shop_anim.png",scale:2.7,framesMax:6,canvasBlock:o,canvasView:n}),l=new s({position:{x:a[`${e}`].position.x,y:a[`${e}`].position.y},velocity:{x:a[`${e}`].velocity.x,y:a[`${e}`].velocity.x},offset:{x:20,y:100},imageSrc:a[`${e}`].imageSrc,framesMax:a[`${e}`].framesMax,scale:a[`${e}`].scale,offset:{x:a[`${e}`].offset.x,y:a[`${e}`].offset.y},sprites:{idle:{imageSrc:a[`${e}`].sprites.idle.imageSrc,framesMax:a[`${e}`].sprites.idle.framesMax},run:{imageSrc:a[`${e}`].sprites.run.imageSrc,framesMax:a[`${e}`].sprites.run.framesMax},jump:{imageSrc:a[`${e}`].sprites.jump.imageSrc,framesMax:a[`${e}`].sprites.jump.framesMax},fall:{imageSrc:a[`${e}`].sprites.fall.imageSrc,framesMax:a[`${e}`].sprites.fall.framesMax},attack:{imageSrc:a[`${e}`].sprites.attack.imageSrc,framesMax:a[`${e}`].sprites.attack.framesMax},takeHit:{imageSrc:a[`${e}`].sprites.takeHit.imageSrc,framesMax:a[`${e}`].sprites.takeHit.framesMax},death:{imageSrc:a[`${e}`].sprites.death.imageSrc,framesMax:a[`${e}`].sprites.death.framesMax}},attackBox:{offset:{x:a[`${e}`].attackBox.offset.x,y:a[`${e}`].attackBox.offset.y},width:a[`${e}`].attackBox.width,height:a[`${e}`].attackBox.height},canvasView:n,canvasBlock:o}),h=new s({position:{x:a[`${t}`].position.x,y:a[`${t}`].position.y},velocity:{x:a[`${t}`].velocity.x,y:a[`${t}`].velocity.x},offset:{x:20,y:100},imageSrc:a[`${t}`].imageSrc,framesMax:a[`${t}`].framesMax,scale:a[`${t}`].scale,offset:{x:a[`${t}`].offset.x,y:a[`${t}`].offset.y},sprites:{idle:{imageSrc:a[`${t}`].sprites.idle.imageSrc,framesMax:a[`${t}`].sprites.idle.framesMax},run:{imageSrc:a[`${t}`].sprites.run.imageSrc,framesMax:a[`${t}`].sprites.run.framesMax},jump:{imageSrc:a[`${t}`].sprites.jump.imageSrc,framesMax:a[`${t}`].sprites.jump.framesMax},fall:{imageSrc:a[`${t}`].sprites.fall.imageSrc,framesMax:a[`${t}`].sprites.fall.framesMax},attack:{imageSrc:a[`${t}`].sprites.attack.imageSrc,framesMax:a[`${t}`].sprites.attack.framesMax},takeHit:{imageSrc:a[`${t}`].sprites.takeHit.imageSrc,framesMax:a[`${t}`].sprites.takeHit.framesMax},death:{imageSrc:a[`${t}`].sprites.death.imageSrc,framesMax:a[`${t}`].sprites.death.framesMax}},attackBox:{offset:{x:a[`${t}`].attackBox.offset.x,y:a[`${t}`].attackBox.offset.y},width:a[`${t}`].attackBox.width,height:a[`${t}`].attackBox.height},canvasView:n,canvasBlock:o}),f={d:{pressed:!1},a:{pressed:!1},w:{pressed:!1},ArrowRight:{pressed:!1},ArrowLeft:{pressed:!1},Enter:{pressed:!1}};function x({rectangle1:e,rectangle2:t}){return e.attackBox.position.x+e.attackBox.width>=t.position.x&&e.attackBox.position.x<=t.position.x+t.width&&e.attackBox.position.y+e.attackBox.height>=t.position.y&&e.attackBox.position.y<=t.position.y+t.height&&e.isAttack}let d,y=15;!function e(){const t=document.querySelector(".game__timer");y>0&&(y--,d=setTimeout(e,1e3),t.innerHTML=y),0==y&&r(l,h,d)}(),function e(){window.requestAnimationFrame(e),n.fillStyle="black",n.fillRect(0,0,o.width,o.height),g.update(),p.update(),l.update(),h.update(),l.velocity.x=0,h.velocity.x=0,l.dead||(l.swicthSprite("idle"),f.d.pressed&&"d"===l.lastKey&&(l.velocity.x=5,l.swicthSprite("run")),f.a.pressed&&"a"===l.lastKey&&(l.velocity.x=-5,l.swicthSprite("run")),x({rectangle1:l,rectangle2:h})&&l.isAttack&&4===l.framesCurrent&&(l.isAttack=!1,h.takeHit(),c.to(document.querySelector("#player2"),{width:h.health+"%"})),l.velocity.y<0&&l.swicthSprite("jump"),l.velocity.y>0&&l.swicthSprite("fall"),l.isAttack&&4===l.framesCurrent&&(l.isAttack=!1)),h.dead||(h.swicthSprite("idle"),f.ArrowLeft.pressed&&"ArrowLeft"===h.lastKey&&(h.velocity.x=-5,h.swicthSprite("run")),f.ArrowRight.pressed&&"ArrowRight"===h.lastKey&&(h.velocity.x=5,h.swicthSprite("run")),x({rectangle1:h,rectangle2:l})&&h.isAttack&&4===h.framesCurrent&&(h.isAttack=!1,l.takeHit(),c.to(document.querySelector("#player1"),{width:l.health+"%"})),h.isAttack&&4===h.framesCurrent&&(h.isAttack=!1),h.velocity.y<0&&h.swicthSprite("jump"),h.velocity.y>0&&h.swicthSprite("fall")),0!=l.health&&0!=h.health||r(l,h,d)}(),window.addEventListener("keydown",(e=>{switch(e.key){case"d":f.d.pressed=!0,l.lastKey="d";break;case"a":f.a.pressed=!0,l.lastKey="a";break;case"w":l.velocity.y=-8;break;case" ":l.attack();break;case"ArrowLeft":h.lastKey="ArrowLeft",f.ArrowLeft.pressed=!0;break;case"ArrowRight":h.lastKey="ArrowRight",f.ArrowRight.pressed=!0;break;case"Enter":h.velocity.y=-8;break;case"/":h.attack()}})),window.addEventListener("keyup",(e=>{switch(e.key){case"d":f.d.pressed=!1;break;case"a":f.a.pressed=!1;break;case"w":f.w.pressed=!1;case"ArrowLeft":f.ArrowLeft.pressed=!1;break;case"ArrowRight":f.ArrowRight.pressed=!1}}))}))})(),(()=>{const e=document.querySelector("body"),t=document.querySelector(".header"),a=document.querySelector(".person"),i=document.querySelector(".btn__start"),s=document.querySelector(".btn__next");i.addEventListener("click",(()=>{e.style.overflowY="scroll",setTimeout((()=>{t.style.display="none"}),500),e.style.overflowY="hidden"})),s.addEventListener("click",(()=>{e.style.overflowY="scroll",setTimeout((()=>{a.style.display="none"}),500),e.style.overflowY="hidden"}))})(),(()=>{const e=document.querySelector(".game__control-block"),t=document.querySelector(".game__control-info"),a=gsap.timeline();t.addEventListener("mouseover",(()=>{a.fromTo(e,{display:"flex",opacity:0,y:"-50%"},{display:"flex",opacity:1,y:"0"})})),t.addEventListener("mouseleave",(()=>{a.to(e,{display:"none",opacity:0,y:"-50%"})}))})(),document.querySelector(".btn__try").addEventListener("click",(()=>{location.reload()}))})();